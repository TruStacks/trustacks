"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[651],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(n),d=r,k=u["".concat(p,".").concat(d)]||u[d]||m[d]||o;return n?a.createElement(k,i(i({ref:t},c),{},{components:n})):a.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2257:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const o={title:"Quickstart",sidebar_position:2},i=void 0,l={unversionedId:"quickstart",id:"quickstart",title:"Quickstart",description:"Installation",source:"@site/docs/quickstart.md",sourceDirName:".",slug:"/quickstart",permalink:"/quickstart",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/quickstart.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Quickstart",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/"},next:{title:"Overview",permalink:"/overview"}},p={},s=[{value:"Installation",id:"installation",level:3},{value:"Plan",id:"plan",level:3},{value:"Input",id:"input",level:3},{value:"Encryption",id:"encryption",level:5},{value:"Run",id:"run",level:2}],c={toc:s},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Download the cli ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/TruStacks/trustacks/releases"},"here")),(0,r.kt)("h3",{id:"plan"},"Plan"),(0,r.kt)("p",null,"Run the following command to build an action plan"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"tsctl plan --name <plan_name> --source <path_to_source>\n")),(0,r.kt)("p",null,"This will generate a plan file in the working directory named ",(0,r.kt)("inlineCode",{parentName:"p"},"<plan_name>.plan")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Run ",(0,r.kt)("inlineCode",{parentName:"p"},"tsctl explain <plan_name>.plan")," to get a detailed description of the action plan")),(0,r.kt)("h3",{id:"input"},"Input"),(0,r.kt)("p",null,"Run the following command to generate stack inputs from the plan. The inputs contain credentials and parameters for your software delivery stack that will be used by actions in the action plan."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"tsctl stack init --from-plan <plan_name>.plan\n")),(0,r.kt)("p",null,"This will generate an input file in the working directory named ",(0,r.kt)("inlineCode",{parentName:"p"},"inputs.yaml")," with the keys and null values for the required inputs."),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"DO NOT MODIFY INPUT KEYS")),(0,r.kt)("h5",{id:"encryption"},"Encryption"),(0,r.kt)("p",null,"TruStacks uses ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/getsops/sops/releases"},"sops")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/FiloSottile/age/releases"},"age")," for input encryption."),(0,r.kt)("p",null,"Run the following commands to encrypt your inputs"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Generate an age key")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"age-keygen -o key.txt\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Encrypt your stack inputs file using the public key from the ",(0,r.kt)("em",{parentName:"li"},"key.txt")," file")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sops -e -i --age <age_public_key> inputs.yaml\n")),(0,r.kt)("h2",{id:"run"},"Run"),(0,r.kt)("p",null,"Action plans require ",(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"docker"),"."),(0,r.kt)("p",null,"Run the following in a docker environment (local or CI/CD) from the root of your source."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"SOPS_AGE_KEY=<age_secret_key> tsctl run <plan_file> --source <path_to_source> --inputs <path_to_encrypted_inputs> --stages feedback\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Remove the ",(0,r.kt)("inlineCode",{parentName:"p"},"--stages")," option to run the complete plan")))}m.isMDXComponent=!0}}]);